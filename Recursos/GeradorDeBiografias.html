<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gerador de Biografias</title>
    <!-- Script essencial para a IA funcionar -->
    <script src="https://js.puter.com/v2/"></script>
    
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #1c1e21; margin: 0; padding: 20px; min-height: 100vh; }
        .container { max-width: 1200px; margin: 20px auto; background-color: rgba(255, 255, 255, 0.95); padding: 30px; border-radius: 15px; box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); backdrop-filter: blur(10px); }
        h1 { text-align: center; color: #333; font-size: 2.5rem; margin-bottom: 10px; }
        .subtitle { text-align: center; color: #666; margin-bottom: 30px; font-size: 1.1rem; line-height: 1.6; }
        .search-section { background: rgba(102, 126, 234, 0.1); padding: 25px; border-radius: 10px; margin-bottom: 30px; border: 1px solid rgba(102, 126, 234, 0.2); }
        .search-input { width: 100%; padding: 15px; font-size: 16px; border-radius: 8px; border: 2px solid #e1e5e9; box-sizing: border-box; outline: none; transition: all 0.3s ease; }
        .search-input:focus { border-color: #667eea; box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1); }
        .main-button { display: block; width: 100%; padding: 15px; font-size: 16px; font-weight: bold; color: #fff; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; border-radius: 8px; cursor: pointer; margin-top: 15px; transition: all 0.3s ease; }
        .main-button:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3); }
        .main-button:disabled { background: #999; cursor: not-allowed; transform: none; }
        #status { text-align: center; padding: 15px; margin-top: 20px; border-radius: 8px; display: none; }
        .status-success { background-color: #d4edda; color: #155724; }
        .status-error { background-color: #f8d7da; color: #721c24; }
        .status-info { background-color: #cce5ff; color: #004085; }
        .suggestion-box { background-color: #e9ecef; border: 1px solid #ced4da; padding: 15px; margin-top: -15px; margin-bottom: 20px; border-radius: 8px; text-align: center; font-size: 1rem; }
        .suggestion-btn { background-color: #28a745; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; margin-left: 10px; font-weight: bold; transition: background-color 0.2s; }
        .suggestion-btn:hover { background-color: #218838; }
        .suggestion-btn.reject { background-color: #6c757d; }
        .suggestion-btn.reject:hover { background-color: #5a6268; }
        .biography-container { margin-top: 30px; display: none; }
        .biography-card { background: white; border-radius: 15px; padding: 30px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); margin-bottom: 30px; border-left: 5px solid #667eea; }
        .mathematician-header { display: flex; gap: 30px; margin-bottom: 30px; align-items: flex-start; }
        .mathematician-photo { flex-shrink: 0; width: 200px; height: 250px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2); object-fit: cover; border: 3px solid #fff; background: #f0f2f5; overflow: hidden; }
        .photo-placeholder { width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; background: linear-gradient(45deg, #667eea, #764ba2); color: white; font-size: 18px; text-align: center; border-radius: 7px; }
        .loading-photo { border: 3px solid #f3f3f3; border-top: 3px solid #667eea; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 10px auto; }
        .mathematician-info { flex: 1; }
        .mathematician-name { font-size: 2.2rem; font-weight: bold; color: #333; margin-bottom: 15px; }
        .basic-info { background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .info-item { display: flex; margin-bottom: 10px; }
        .info-label { font-weight: bold; color: #667eea; min-width: 140px; }
        .info-value { color: #333; }
        .biography-content { line-height: 1.8; color: #444; }
        .biography-section { margin-bottom: 25px; }
        .section-title { font-size: 1.4rem; font-weight: bold; color: #667eea; margin-bottom: 15px; border-bottom: 2px solid #667eea; padding-bottom: 5px; }
        .contributions-list { list-style: none; padding: 0; }
        .contributions-list li { background: rgba(102, 126, 234, 0.1); padding: 10px 15px; margin-bottom: 8px; border-radius: 5px; border-left: 3px solid #667eea; }
        .timeline-item { padding: 15px; border-left: 3px solid #667eea; margin-bottom: 15px; background: rgba(102, 126, 234, 0.05); border-radius: 0 8px 8px 0; }
        .timeline-year { font-weight: bold; color: #667eea; font-size: 1.1rem; }
        .timeline-event { margin-top: 5px; color: #444; }
        .card-buttons { float: right; margin-top: 10px; display: flex; gap: 10px; }
        .clear-button, .print-button { color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        .clear-button { background: #6c757d; } .clear-button:hover { background: #5a6268; }
        .print-button { background: #007bff; } .print-button:hover { background: #0056b3; }
        .examples-section { background: rgba(40, 167, 69, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(40, 167, 69, 0.2); }
        .example-queries { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px; }
        .example-query { background: white; padding: 12px; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; border: 1px solid #ddd; }
        .example-query:hover { background: #f8f9fa; transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); }
        .photo-retry-btn { background: #28a745; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer; font-size: 11px; margin-top: 5px; }
        .photo-retry-btn:hover { background: #218838; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        @media (max-width: 768px) { .mathematician-header { flex-direction: column; align-items: center; text-align: center; } .mathematician-photo { width: 150px; height: 190px; } .example-queries { grid-template-columns: 1fr; } }
        @media print { body { background: none; color: black; } body > .container > *:not(.biography-container) { display: none; } .container { box-shadow: none; padding: 0; margin: 0; max-width: 100%; } .biography-container, .biography-card { display: block !important; box-shadow: none; border: none; margin: 0; padding: 0; } .card-buttons { display: none; } .mathematician-photo { box-shadow: none; border: 1px solid #ccc; } .section-title { color: #333; border-bottom-color: #333; } a { text-decoration: none; color: black; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Gerador de Biografias</h1>
        <p class="subtitle">Descubra a vida e a obra de personalidades not√°veis da hist√≥ria. Digite o nome de qualquer pessoa e obtenha uma biografia completa e detalhada.</p>
        <div class="examples-section">
            <h3 style="margin-top: 0; color: #28a745;">üí° Exemplos de Pesquisa</h3>
            <p>Clique em um exemplo para pesquisar automaticamente ou digite o nome que desejar:</p>
            <div class="example-queries">
                <div class="example-query" onclick="fillExample('Leonardo da Vinci')">üé® Leonardo da Vinci</div>
                <div class="example-query" onclick="fillExample('Marie Curie')">üî¨ Marie Curie</div>
                <div class="example-query" onclick="fillExample('Isaac Newton')">üçé Isaac Newton</div>
                <div class="example-query" onclick="fillExample('William Bonner')">üì∞ William Bonner</div>
            </div>
        </div>
        <div class="search-section">
            <input type="text" id="person-input" class="search-input" placeholder="Digite o nome de uma pessoa (ex: Albert Einstein, Cle√≥patra...)" autocomplete="off">
            <button id="generate-btn" class="main-button">üîç Gerar Biografia Completa</button>
        </div>
        <div id="suggestion-box" class="suggestion-box" style="display: none;"></div>
        <div id="status"></div>
        <div class="biography-container" id="biography-container"></div>
    </div>

    <script>
        const generateBtn = document.getElementById('generate-btn');
        const personInput = document.getElementById('person-input');
        const statusDiv = document.getElementById('status');
        const biographyContainer = document.getElementById('biography-container');
        const suggestionBox = document.getElementById('suggestion-box');

        function showStatus(message, type = 'info') { statusDiv.textContent = message; statusDiv.className = `status-${type}`; statusDiv.style.display = 'block'; }
        function fillExample(name) { personInput.value = name; handleSearchRequest(); }
        function formatBiographyText(text) { if (!text) return ''; let formattedText = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'); const paragraphs = formattedText.split(/(\r\n|\n|\r){2,}/); return paragraphs.map(p => p.trim()).filter(p => p.length > 0).map(p => `<p>${p.replace(/\\n/g, ' ')}</p>`).join(''); }
        function printBiography() { window.print(); }
        function sanitizeJSONString(str) { return str.replace(/[\n\r\t]/g, '').replace(/,\s*(?=[\]\}])/g, ''); }

        async function handleSearchRequest() {
            const originalName = personInput.value.trim();
            if (!originalName) { showStatus('Por favor, digite o nome de uma pessoa.', 'error'); return; }
            suggestionBox.style.display = 'none';
            generateBtn.disabled = true;
            generateBtn.textContent = 'Verificando nome...';
            showStatus('Verificando o nome digitado...', 'info');
            const correctedName = await getCorrectedName(originalName);
            if (correctedName.toLowerCase() === originalName.toLowerCase()) {
                generateBiography();
            } else {
                showCorrectionSuggestion(originalName, correctedName);
                generateBtn.disabled = false;
                generateBtn.textContent = 'üîç Gerar Biografia Completa';
                statusDiv.style.display = 'none';
            }
        }

        /**
         * **FUN√á√ÉO CORRIGIDA E MAIS ROBUSTA**
         * Usa a API da Wikipedia para encontrar a grafia correta de um nome.
         */
        async function getCorrectedName(name) {
            try {
                const url = `https://pt.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(name)}&format=json&origin=*`;
                const response = await fetch(url);
                if (!response.ok) return name;
                const data = await response.json();

                // 1. Prioridade m√°xima: a sugest√£o direta da API ("Voc√™ quis dizer?")
                // Esta √© a melhor forma de corrigir erros de digita√ß√£o.
                if (data.query.searchinfo && data.query.searchinfo.suggestion) {
                    return data.query.searchinfo.suggestion;
                }

                // 2. Segunda op√ß√£o: o t√≠tulo do primeiro resultado da busca, caso n√£o haja sugest√£o.
                if (data.query.search && data.query.search.length > 0) {
                    return data.query.search[0].title;
                }
                
                // 3. Se nada for encontrado, retorna o nome original.
                return name;
            } catch (error) {
                console.warn("Erro ao verificar o nome na Wikipedia:", error);
                return name;
            }
        }

        function showCorrectionSuggestion(originalName, correctedName) {
            suggestionBox.innerHTML = `Voc√™ quis dizer: <strong>${correctedName}</strong>?
                <button id="confirm-correction" class="suggestion-btn">Sim, Pesquisar</button>
                <button id="reject-correction" class="suggestion-btn reject">N√£o, pesquisar "${originalName}"</button>`;
            suggestionBox.style.display = 'block';
            document.getElementById('confirm-correction').onclick = () => { personInput.value = correctedName; suggestionBox.style.display = 'none'; generateBiography(); };
            document.getElementById('reject-correction').onclick = () => { suggestionBox.style.display = 'none'; generateBiography(); };
        }
        
        function formatWikidataDate(dateString) {
            if (!dateString) return null;
            const match = dateString.match(/([+-])(\d{4,})-(\d{2})-(\d{2})/);
            if (match) {
                const sign = match[1]; const year = parseInt(match[2], 10); const month = match[3]; const day = match[4];
                let formattedDate = '';
                if (sign === '-') { formattedDate = `${year} a.C.`; } else {
                    if (day !== '00' && month !== '00') { formattedDate = `${day}/${month}/${year}`; } else if (month !== '00') { formattedDate = `${month}/${year}`; } else { formattedDate = `${year}`; }
                    if (sign === '+' && year < 1000) { formattedDate += ' d.C.'; }
                }
                return formattedDate;
            }
            return dateString.split('T')[0];
        }

        async function getFactsFromWikidata(personName) {
            try {
                const searchUrl = `https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(personName)}&language=pt&format=json&origin=*`;
                const searchResponse = await fetch(searchUrl); if (!searchResponse.ok) return {};
                const searchData = await searchResponse.json(); if (!searchData.search || searchData.search.length === 0) return {};
                const entityId = searchData.search[0].id;
                const entityUrl = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${entityId}&props=claims&format=json&origin=*`;
                const entityResponse = await fetch(entityUrl); if (!entityResponse.ok) return {};
                const entityData = await entityResponse.json(); const claims = entityData.entities[entityId].claims;
                const birthClaim = claims.P569?.[0]?.mainsnak?.datavalue?.value?.time;
                const deathClaim = claims.P570?.[0]?.mainsnak?.datavalue?.value?.time;
                return { birthDate: birthClaim ? formatWikidataDate(birthClaim) : null, deathDate: deathClaim ? formatWikidataDate(deathClaim) : null, };
            } catch (error) { console.warn("Erro ao buscar fatos no Wikidata:", error); return {}; }
        }

        async function generateBiography() {
            const personName = personInput.value.trim(); if (!personName) return;
            generateBtn.disabled = true; generateBtn.textContent = 'Verificando fatos...';
            showStatus('Verificando fatos no Wikidata para maior precis√£o...', 'info');
            biographyContainer.style.display = 'none'; suggestionBox.style.display = 'none';
            const verifiedFacts = await getFactsFromWikidata(personName);
            generateBtn.textContent = 'Gerando biografia...'; showStatus('Fatos verificados. Gerando a biografia com a IA...', 'info');
            try {
                const factString = `(Fatos verificados: Nascimento: ${verifiedFacts.birthDate || 'N√£o encontrado'}, Morte: ${verifiedFacts.deathDate || 'Ainda vivo(a)'}).`;
                const prompt = `Voc√™ √© um bi√≥grafo especialista. Crie uma biografia detalhada sobre "${personName}". **REGRA MAIS IMPORTANTE:** Voc√™ DEVE usar os fatos verificados fornecidos. Se uma data √© apenas um ano (ex: '69 a.C.'), voc√™ DEVE usar apenas esse formato. N√ÉO invente detalhes extras. Use estes fatos: ${factString}. Responda **EXCLUSIVAMENTE** com um objeto JSON v√°lido. {"name": "Nome completo", "birth_date": "${verifiedFacts.birthDate || 'N√£o dispon√≠vel'}", "birth_place": "Cidade, Pa√≠s", "death_date": "${verifiedFacts.deathDate || 'Ainda vivo(a)'}", "death_place": "Cidade, Pa√≠s ou 'N/A'", "nationality": "Nacionalidade", "main_areas": ["√Årea 1", "√Årea 2"], "biography": "**Estrutura (4-5 par√°grafos):**\\n\\n1. **In√≠cio da Vida:** Contexto, fam√≠lia, educa√ß√£o.\\n\\n2. **Carreira:** Marcos, import√¢ncia.\\n\\n3. **Contexto Hist√≥rico:** Sua √©poca, desafios.\\n\\n4. **Legado:** Influ√™ncia, relev√¢ncia hoje.", "major_contributions": ["Contribui√ß√£o 1.", "Contribui√ß√£o 2."], "timeline": [{"year": "AAAA", "event": "Evento."}], "curiosities": ["Curiosidade 1.", "Curiosidade 2."]}`;
                const response = await puter.ai.chat([{ role: 'user', content: prompt }]);
                if (!response || !response.message || !response.message.content) throw new Error('A IA n√£o retornou uma resposta v√°lida.');
                let content = response.message.content; const jsonStart = content.indexOf('{'); const jsonEnd = content.lastIndexOf('}') + 1;
                if (jsonStart === -1 || jsonEnd === 0) throw new Error('A resposta da IA n√£o continha um JSON v√°lido.');
                let jsonString = sanitizeJSONString(content.substring(jsonStart, jsonEnd));
                const biographyData = JSON.parse(jsonString);
                biographyData.name = personName;
                if (verifiedFacts.birthDate) { biographyData.birth_date = verifiedFacts.birthDate; }
                if (verifiedFacts.deathDate) { biographyData.death_date = verifiedFacts.deathDate; } else if (!biographyData.death_date || biographyData.death_place?.toLowerCase() === 'n/a') { biographyData.death_date = "Ainda vivo(a)"; }
                displayBiography(biographyData); showStatus('Biografia gerada com sucesso e fatos verificados!', 'success');
            } catch (error) { console.error('Erro na gera√ß√£o:', error); if (error.code === 4001) { showStatus('Erro de autentica√ß√£o: Por favor, fa√ßa login em sua conta Puter.com.', 'error'); } else { showStatus(`Ocorreu um erro ao gerar a biografia. Verifique o nome e tente novamente. Detalhe: ${error.message}`, 'error'); } } finally { generateBtn.disabled = false; generateBtn.textContent = 'üîç Gerar Biografia Completa'; }
        }

        function displayBiography(data) {
            const photoId = `photo-${Date.now()}`; let deathInfoHtml = '';
            if (data.death_date) { if (String(data.death_date).toLowerCase().includes('vivo')) { deathInfoHtml = `<div class="info-item"><span class="info-label">‚ö∞Ô∏è Status:</span><span class="info-value">${data.death_date}</span></div>`; } else { deathInfoHtml = `<div class="info-item"><span class="info-label">‚ö∞Ô∏è Falecimento:</span><span class="info-value">${data.death_date} em ${data.death_place || 'N/A'}</span></div>`; } }
            const biographyHTML = `<div class="biography-card"><div class="card-buttons"><button class="print-button" onclick="printBiography()">üñ®Ô∏è Imprimir</button><button class="clear-button" onclick="clearBiography()">Limpar</button></div><div class="mathematician-header"><div class="mathematician-photo" id="${photoId}"><div class="photo-placeholder"><div class="loading-photo"></div><div>Procurando foto...</div></div></div><div class="mathematician-info"><h2 class="mathematician-name">${data.name || 'Nome n√£o encontrado'}</h2><div class="basic-info"><div class="info-item"><span class="info-label">üìÖ Nascimento:</span><span class="info-value">${data.birth_date || 'N/A'} em ${data.birth_place || 'N/A'}</span></div>${deathInfoHtml}<div class="info-item"><span class="info-label">üåç Nacionalidade:</span><span class="info-value">${data.nationality || 'N/A'}</span></div><div class="info-item"><span class="info-label">üèÜ Atua√ß√£o:</span><span class="info-value">${(data.main_areas || []).join(', ')}</span></div></div></div></div><div class="biography-content">${data.biography ? `<div class="biography-section"><div class="section-title">üìñ Biografia</div>${formatBiographyText(data.biography)}</div>` : ''}${data.major_contributions && data.major_contributions.length > 0 ? `<div class="biography-section"><div class="section-title">üèÜ Principais Feitos</div><ul class="contributions-list">${data.major_contributions.map(contrib => `<li>${contrib}</li>`).join('')}</ul></div>` : ''}${data.timeline && data.timeline.length > 0 ? `<div class="biography-section"><div class="section-title">üìÖ Linha do Tempo</div>${data.timeline.map(item => `<div class="timeline-item"><div class="timeline-year">${item.year}</div><div class="timeline-event">${item.event}</div></div>`).join('')}</div>` : ''}${data.curiosities && data.curiosities.length > 0 ? `<div class="biography-section"><div class="section-title">üîç Curiosidades</div><ul class="contributions-list">${data.curiosities.map(curiosity => `<li>${curiosity}</li>`).join('')}</ul></div>` : ''}</div></div>`;
            biographyContainer.innerHTML = biographyHTML; biographyContainer.style.display = 'block'; window.scrollTo({ top: biographyContainer.offsetTop - 20, behavior: 'smooth' }); loadPersonPhoto(data.name, photoId);
        }

        async function loadPersonPhoto(personName, photoElementId) {
            const photoElement = document.getElementById(photoElementId); if (!photoElement) return;
            const imageSources = [{ name: 'Wikidata', func: () => tryWikidata(personName) }, { name: 'Wikipedia (PT)', func: () => tryWikipediaAPI(personName, 'pt') }, { name: 'Wikipedia (EN)', func: () => tryWikipediaAPI(personName, 'en') }, { name: 'DuckDuckGo', func: () => tryDuckDuckGo(personName) }];
            let photoLoaded = false;
            for (const source of imageSources) {
                if (photoLoaded) break;
                updatePhotoStatus(photoElement, `Buscando em ${source.name}...`);
                try { const imageUrl = await source.func(); if (imageUrl) { const success = await loadImageWithFallback(imageUrl, personName, photoElement); if (success) { console.log(`Foto de ${source.name}: ${imageUrl}`); photoLoaded = true; } } } catch (error) { console.warn(`Erro em ${source.name}:`, error.message); }
            }
            if (!photoLoaded) showCustomPlaceholder(personName, photoElementId, 'Foto n√£o encontrada');
        }
        async function tryWikidata(personName) { const searchUrl = `https://www.wikidata.org/w/api.php?action=wbsearchentities&search=${encodeURIComponent(personName)}&language=pt&format=json&origin=*`; const searchResponse = await fetch(searchUrl); if (!searchResponse.ok) return null; const searchData = await searchResponse.json(); if (!searchData.search || searchData.search.length === 0) return null; const entityId = searchData.search[0].id; const entityUrl = `https://www.wikidata.org/w/api.php?action=wbgetentities&ids=${entityId}&props=claims&format=json&origin=*`; const entityResponse = await fetch(entityUrl); if (!entityResponse.ok) return null; const entityData = await entityResponse.json(); const claims = entityData.entities[entityId].claims; if (!claims || !claims.P18) return null; const imageName = claims.P18[0].mainsnak.datavalue.value; if (!imageName) return null; return `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(imageName.replace(/ /g, '_'))}?width=300`; }
        async function tryWikipediaAPI(personName, lang) { const url = `https://${lang}.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(personName.replace(/ /g, '_'))}`; const response = await fetch(url, { headers: { 'User-Agent': 'BiographyGenerator/1.0' } }); if (!response.ok) return null; const data = await response.json(); if (data.thumbnail && data.thumbnail.source) return data.thumbnail.source.replace(/\/\d+px-/, '/300px-'); return null; }
        async function tryDuckDuckGo(personName) { const url = `https://api.duckduckgo.com/?q=${encodeURIComponent(personName)}&format=json&pretty=1&no_html=1&skip_disambig=1`; const response = await fetch(url); if (!response.ok) return null; const data = await response.json(); if (data.Image && data.Image.length > 0) return new URL(data.Image, 'https://duckduckgo.com').href; return null; }
        async function loadImageWithFallback(imageUrl, personName, photoElement) { return new Promise((resolve) => { const img = new Image(); let timeoutId = null; img.onload = () => { clearTimeout(timeoutId); photoElement.innerHTML = `<img src="${imageUrl}" alt="Foto de ${personName}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 7px;">`; resolve(true); }; img.onerror = () => { clearTimeout(timeoutId); resolve(false); }; timeoutId = setTimeout(() => { resolve(false); }, 10000); img.src = imageUrl; }); }
        function updatePhotoStatus(photoElement, message) { photoElement.innerHTML = `<div class="photo-placeholder"><div class="loading-photo"></div><div>${message}</div></div>`; }
        function getInitials(name) { return name.split(' ').map(n => n[0]).join('').substring(0, 2).toUpperCase(); }
        function showCustomPlaceholder(name, elementId, message = 'Foto n√£o encontrada') { const photoElement = document.getElementById(elementId); if (!photoElement) return; const initials = getInitials(name); const colors = ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b', '#fa709a']; const color = colors[name.length % colors.length]; photoElement.innerHTML = `<div class="photo-placeholder" style="background: ${color};"><div style="font-size: 48px; font-weight: bold;">${initials}</div><div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">${message}</div><button class="photo-retry-btn" onclick="retryPhotoLoad('${name}', '${elementId}')">Tentar novamente</button></div>`; }
        function retryPhotoLoad(personName, photoElementId) { loadPersonPhoto(personName, photoElementId); }
        function clearBiography() { biographyContainer.style.display = 'none'; biographyContainer.innerHTML = ''; personInput.value = ''; statusDiv.style.display = 'none'; suggestionBox.style.display = 'none'; personInput.focus(); }
        
        generateBtn.addEventListener('click', handleSearchRequest);
        personInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') handleSearchRequest(); });
        window.fillExample = fillExample; window.clearBiography = clearBiography; window.retryPhotoLoad = retryPhotoLoad; window.printBiography = printBiography;
        personInput.focus();
    </script>
</body>
</html>
