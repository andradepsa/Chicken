<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gerador de Biografias</title>
    <!-- Script essencial para a IA funcionar -->
    <script src="https://js.puter.com/v2/"></script>
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #1c1e21;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 20px auto;
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .search-section {
            background: rgba(102, 126, 234, 0.1);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }
        
        .search-input {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            border-radius: 8px;
            border: 2px solid #e1e5e9;
            box-sizing: border-box;
            outline: none;
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .main-button {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .main-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .main-button:disabled {
            background: #999;
            cursor: not-allowed;
            transform: none;
        }
        
        #status {
            text-align: center;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
            display: none;
        }
        
        .status-success { background-color: #d4edda; color: #155724; }
        .status-error { background-color: #f8d7da; color: #721c24; }
        .status-info { background-color: #cce5ff; color: #004085; }
        
        .biography-container {
            margin-top: 30px;
            display: none;
        }
        
        .biography-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }
        
        .mathematician-header {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            align-items: flex-start;
        }
        
        .mathematician-photo {
            flex-shrink: 0;
            width: 200px;
            height: 250px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            object-fit: cover;
            border: 3px solid #fff;
            background: #f0f2f5;
            overflow: hidden;
        }
        
        .photo-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            font-size: 18px;
            text-align: center;
            border-radius: 7px;
        }
        
        .loading-photo {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 10px auto;
        }
        
        .mathematician-info {
            flex: 1;
        }
        
        .mathematician-name {
            font-size: 2.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }
        
        .basic-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .info-item {
            display: flex;
            margin-bottom: 10px;
        }
        
        .info-label {
            font-weight: bold;
            color: #667eea;
            min-width: 140px;
        }
        
        .info-value {
            color: #333;
        }
        
        .biography-content {
            line-height: 1.8;
            color: #444;
        }
        
        .biography-section {
            margin-bottom: 25px;
        }
        
        .section-title {
            font-size: 1.4rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 5px;
        }
        
        .contributions-list {
            list-style: none;
            padding: 0;
        }
        
        .contributions-list li {
            background: rgba(102, 126, 234, 0.1);
            padding: 10px 15px;
            margin-bottom: 8px;
            border-radius: 5px;
            border-left: 3px solid #667eea;
        }
        
        .timeline-item {
            padding: 15px;
            border-left: 3px solid #667eea;
            margin-bottom: 15px;
            background: rgba(102, 126, 234, 0.05);
            border-radius: 0 8px 8px 0;
        }
        
        .timeline-year {
            font-weight: bold;
            color: #667eea;
            font-size: 1.1rem;
        }
        
        .timeline-event {
            margin-top: 5px;
            color: #444;
        }
        
        .clear-button {
            background: #6c757d;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            float: right;
            margin-top: 10px;
        }
        
        .clear-button:hover {
            background: #5a6268;
        }
        
        .examples-section {
            background: rgba(40, 167, 69, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(40, 167, 69, 0.2);
        }
        
        .example-queries {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .example-query {
            background: white;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #ddd;
        }
        
        .example-query:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .photo-error {
            font-size: 12px;
            color: #dc3545;
            margin-top: 5px;
        }

        .photo-retry-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 11px;
            margin-top: 5px;
        }

        .photo-retry-btn:hover {
            background: #218838;
        }

        .suggestions-container {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .suggestions-title {
            color: #856404;
            font-weight: bold;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .suggestions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .suggestion-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #ddd;
            text-align: center;
            font-weight: 500;
        }

        .suggestion-item:hover {
            background: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
        }

        .auto-complete-container {
            position: relative;
            width: 100%;
        }

        .auto-complete-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .auto-complete-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid #eee;
            transition: background-color 0.3s ease;
        }

        .auto-complete-item:hover,
        .auto-complete-item.selected {
            background-color: #f8f9fa;
        }

        .auto-complete-item:last-child {
            border-bottom: none;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .mathematician-header {
                flex-direction: column;
                align-items: center;
                text-align: center;
            }
            .mathematician-photo {
                width: 150px;
                height: 190px;
            }
            .example-queries {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìö Gerador de Biografias</h1>
        <p class="subtitle">
            Descubra a vida e a obra de personalidades not√°veis da hist√≥ria. 
            Digite o nome de qualquer pessoa e obtenha uma biografia completa e detalhada.
        </p>

        <div class="examples-section">
            <h3 style="margin-top: 0; color: #28a745;">üí° Exemplos de Pesquisa</h3>
            <p>Clique em um exemplo ou digite o nome de qualquer pessoa que desejar:</p>
            <div class="example-queries">
                <div class="example-query" onclick="fillExample('Leonardo da Vinci')">üé® Leonardo da Vinci</div>
                <div class="example-query" onclick="fillExample('Marie Curie')">üî¨ Marie Curie</div>
                <div class="example-query" onclick="fillExample('Santos Dumont')">‚úàÔ∏è Santos Dumont</div>
                <div class="example-query" onclick="fillExample('Pel√©')">‚öΩ Pel√©</div>
                <div class="example-query" onclick="fillExample('Clarice Lispector')">‚úçÔ∏è Clarice Lispector</div>
                <div class="example-query" onclick="fillExample('Nelson Mandela')">üïäÔ∏è Nelson Mandela</div>
            </div>
        </div>

        <div class="search-section">
            <div class="auto-complete-container">
                <input type="text" id="person-input" class="search-input" 
                       placeholder="Digite o nome de qualquer pessoa (ex: Albert Einstein, Cle√≥patra...)" autocomplete="off">
                <div id="auto-complete-suggestions" class="auto-complete-suggestions"></div>
            </div>
            <button id="generate-btn" class="main-button">üîç Gerar Biografia Completa</button>
        </div>
        
        <div id="status"></div>
        
        <div id="suggestions-container" class="suggestions-container">
            <div class="suggestions-title">ü§î Talvez voc√™ quis dizer:</div>
            <div id="suggestions-grid" class="suggestions-grid"></div>
        </div>
        
        <div class="biography-container" id="biography-container">
            <!-- A biografia gerada aparecer√° aqui -->
        </div>
    </div>

    <script>
        // === VARI√ÅVEIS GLOBAIS ===
        const generateBtn = document.getElementById('generate-btn');
        const personInput = document.getElementById('person-input');
        const statusDiv = document.getElementById('status');
        const biographyContainer = document.getElementById('biography-container');
        const suggestionsContainer = document.getElementById('suggestions-container');
        const suggestionsGrid = document.getElementById('suggestions-grid');
        const autoCompleteSuggestions = document.getElementById('auto-complete-suggestions');

        let currentSuggestionIndex = -1;
        let autoCompleteTimeout = null;

        // === BASE DE DADOS DE PESSOAS FAMOSAS ===
        const famousPeople = [
            // Cientistas
            'Albert Einstein', 'Marie Curie', 'Isaac Newton', 'Charles Darwin', 'Galileu Galilei', 
            'Nikola Tesla', 'Stephen Hawking', 'Leonardo da Vinci', 'Aristoteles', 'Plat√£o',
            
            // Pol√≠ticos e L√≠deres
            'Nelson Mandela', 'Mahatma Gandhi', 'Winston Churchill', 'Abraham Lincoln', 'John F. Kennedy',
            'Cleopatra', 'Julio C√©sar', 'Napoleon Bonaparte', 'George Washington', 'Martin Luther King Jr.',
            
            // Artistas e Escritores
            'William Shakespeare', 'Pablo Picasso', 'Vincent van Gogh', 'Frida Kahlo', 'Mozart',
            'Beethoven', 'Michelangelo', 'Clarice Lispector', 'Machado de Assis', 'Oscar Wilde',
            
            // Brasileiros
            'Santos Dumont', 'Pel√©', 'Ayrton Senna', 'Carmen Miranda', 'Caetano Veloso',
            'Gilberto Gil', 'Chico Buarque', 'Tarsila do Amaral', 'Oscar Niemeyer', 'Ronaldinho',
            
            // Inventores e Empres√°rios
            'Thomas Edison', 'Steve Jobs', 'Bill Gates', 'Henry Ford', 'Alexander Graham Bell',
            
            // Fil√≥sofos
            'Socrates', 'Confucio', 'Friedrich Nietzsche', 'Immanuel Kant', 'Jean-Paul Sartre',
            
            // Exploradores
            'Cristov√£o Colombo', 'Vasco da Gama', 'Marco Polo', 'Fern√£o de Magalh√£es',
            
            // Outros
            'Anne Frank', 'Mother Teresa', 'Walt Disney', 'Coco Chanel', 'Marilyn Monroe'
        ];

        // === BIOGRAFIAS DE FALLBACK ===
        const fallbackBiographies = {
            'Albert Einstein': {
                name: 'Albert Einstein',
                birth_date: '14/03/1879',
                birth_place: 'Ulm, Alemanha',
                death_date: '18/04/1955',
                death_place: 'Princeton, Estados Unidos',
                nationality: 'Alem√£, depois Su√≠√ßa e Americana',
                main_areas: ['F√≠sica Te√≥rica', 'Matem√°tica'],
                biography: 'Albert Einstein foi um f√≠sico te√≥rico alem√£o que desenvolveu a teoria da relatividade, uma das principais teorias da f√≠sica moderna. Nascido em uma fam√≠lia judaica de classe m√©dia, Einstein mostrou interesse precoce pela matem√°tica e f√≠sica. Einstein √© mais conhecido por sua f√≥rmula de equival√™ncia massa-energia E=mc¬≤, que tem sido chamada de "a equa√ß√£o mais famosa do mundo". Ele recebeu o Pr√™mio Nobel de F√≠sica de 1921 por seus servi√ßos √† f√≠sica te√≥rica, especialmente por sua descoberta da lei do efeito fotoel√©trico. Einstein emigrou para os Estados Unidos em 1933 devido √† ascens√£o dos nazistas na Alemanha e passou seus √∫ltimos anos tentando desenvolver uma teoria unificada dos campos. Sua influ√™ncia se estende muito al√©m da f√≠sica, tendo se tornado um s√≠mbolo universal da genialidade cient√≠fica.',
                major_contributions: [
                    'Teoria da Relatividade Especial e Geral, revolucionando nossa compreens√£o do espa√ßo e tempo',
                    'Explica√ß√£o do efeito fotoel√©trico, contribuindo para o desenvolvimento da mec√¢nica qu√¢ntica',
                    'F√≥rmula E=mc¬≤, demonstrando a equival√™ncia entre massa e energia'
                ],
                timeline: [
                    {year: '1879', event: 'Nascimento em Ulm, Alemanha'},
                    {year: '1905', event: 'Publica cinco artigos revolucion√°rios, incluindo a teoria da relatividade especial'},
                    {year: '1921', event: 'Recebe o Pr√™mio Nobel de F√≠sica'},
                    {year: '1933', event: 'Emigra para os Estados Unidos fugindo do regime nazista'},
                    {year: '1955', event: 'Falece em Princeton aos 76 anos'}
                ],
                curiosities: [
                    'Einstein n√£o usava meias, pois achava que elas sempre furavam e criavam buracos',
                    'Sua famosa equa√ß√£o E=mc¬≤ n√£o apareceu em seu artigo original sobre relatividade especial',
                    'Recusou o convite para ser o segundo presidente de Israel em 1952'
                ]
            },
            'Leonardo da Vinci': {
                name: 'Leonardo da Vinci',
                birth_date: '15/04/1452',
                birth_place: 'Vinci, It√°lia',
                death_date: '02/05/1519',
                death_place: 'Fran√ßa',
                nationality: 'Italiana',
                main_areas: ['Arte', 'Ci√™ncia', 'Engenharia', 'Inven√ß√£o'],
                biography: 'Leonardo da Vinci foi um pol√≠mata italiano do Renascimento, considerado um dos maiores g√™nios da humanidade. Nascido como filho ileg√≠timo de um not√°rio, Leonardo desenvolveu habilidades extraordin√°rias em m√∫ltiplas √°reas do conhecimento. Suas obras de arte, incluindo a Mona Lisa e A √öltima Ceia, est√£o entre as mais famosas e valorizadas do mundo. Como cientista e inventor, Leonardo estava s√©culos √† frente de seu tempo, criando projetos para m√°quinas voadoras, tanques, submarinos e muitas outras inven√ß√µes. Seus cadernos cont√™m milhares de p√°ginas de observa√ß√µes e desenhos sobre anatomia, engenharia, arquitetura e ci√™ncias naturais. Leonardo representa o ideal do "homem renascentista" - algu√©m com conhecimento e habilidades em m√∫ltiplas disciplinas.',
                major_contributions: [
                    'Obras-primas da arte como Mona Lisa e A √öltima Ceia, que definiram padr√µes art√≠sticos',
                    'Estudos pioneiros de anatomia humana atrav√©s de disseca√ß√µes detalhadas',
                    'Projetos inovadores de m√°quinas e inventos que anteciparam tecnologias futuras'
                ],
                timeline: [
                    {year: '1452', event: 'Nascimento em Vinci, pr√≥ximo a Floren√ßa'},
                    {year: '1472', event: 'Torna-se membro da Guilda de S√£o Lucas como artista'},
                    {year: '1495', event: 'Inicia a pintura de A √öltima Ceia'},
                    {year: '1503', event: 'Come√ßa a trabalhar na Mona Lisa'},
                    {year: '1519', event: 'Morre na Fran√ßa, aos 67 anos'}
                ],
                curiosities: [
                    'Escrevia de tr√°s para frente, da direita para a esquerda, como se fosse um espelho',
                    'Era vegetariano e tinha grande amor pelos animais, frequentemente comprando p√°ssaros engaiolados para libert√°-los',
                    'Nunca terminou muitas de suas obras, incluindo v√°rias pinturas famosas'
                ]
            },
            'Marie Curie': {
                name: 'Marie Curie',
                birth_date: '07/11/1867',
                birth_place: 'Vars√≥via, Pol√¥nia',
                death_date: '04/07/1934',
                death_place: 'Fran√ßa',
                nationality: 'Polonesa-Francesa',
                main_areas: ['F√≠sica', 'Qu√≠mica', 'Radioatividade'],
                biography: 'Marie Curie foi uma f√≠sica e qu√≠mica polonesa que conduziu pesquisas pioneiras sobre radioatividade. Foi a primeira mulher a ganhar um Pr√™mio Nobel e a √∫nica pessoa a ganhar Pr√™mios Nobel em duas ci√™ncias diferentes (F√≠sica e Qu√≠mica). Nascida Maria Sk≈Çodowska em Vars√≥via, mudou-se para Paris para estudar na Sorbonne, onde conheceu Pierre Curie, com quem se casou em 1895. Juntos, descobriram os elementos r√°dio e pol√¥nio, e Marie continuou suas pesquisas mesmo ap√≥s a morte prematura de Pierre em 1906. Ela se tornou a primeira professora mulher da Universidade de Paris e fundou o Instituto do R√°dio, que se tornou um centro de pesquisa nuclear de renome mundial.',
                major_contributions: [
                    'Descoberta dos elementos qu√≠micos r√°dio e pol√¥nio',
                    'Desenvolvimento de t√©cnicas para isolar is√≥topos radioativos',
                    'Pioneeirismo no uso de radia√ß√£o para tratamentos m√©dicos'
                ],
                timeline: [
                    {year: '1867', event: 'Nascimento em Vars√≥via, Pol√¥nia'},
                    {year: '1891', event: 'Muda-se para Paris para estudar na Sorbonne'},
                    {year: '1898', event: 'Descobre os elementos r√°dio e pol√¥nio'},
                    {year: '1903', event: 'Ganha o Pr√™mio Nobel de F√≠sica'},
                    {year: '1911', event: 'Ganha o Pr√™mio Nobel de Qu√≠mica'}
                ],
                curiosities: [
                    'Seus cadernos de laborat√≥rio de mais de 100 anos ainda s√£o radioativos',
                    'Durante a Primeira Guerra Mundial, desenvolveu unidades m√≥veis de raios-X',
                    'O elemento qu√≠mico C√∫rio foi nomeado em sua homenagem'
                ]
            },
            'Pel√©': {
                name: 'Edson Arantes do Nascimento (Pel√©)',
                birth_date: '23/10/1940',
                birth_place: 'Tr√™s Cora√ß√µes, Brasil',
                death_date: '29/12/2022',
                death_place: 'S√£o Paulo, Brasil',
                nationality: 'Brasileira',
                main_areas: ['Futebol', 'Esporte'],
                biography: 'Pel√© √© amplamente considerado o maior jogador de futebol de todos os tempos. Nascido Edson Arantes do Nascimento em uma fam√≠lia humilde, come√ßou a jogar futebol nas ruas de Bauru. Sua carreira profissional come√ßou aos 15 anos no Santos, onde se tornou uma lenda. Pel√© √© o √∫nico jogador a conquistar tr√™s Copas do Mundo (1958, 1962, 1970) e marcou mais de 1.000 gols em sua carreira. Al√©m de suas habilidades t√©cnicas excepcionais, Pel√© popularizou o futebol globalmente e se tornou um embaixador do esporte. Ap√≥s se aposentar, continuou envolvido no futebol e em atividades beneficentes, mantendo-se como uma figura ic√¥nica do esporte mundial.',
                major_contributions: [
                    'Tr√™s vit√≥rias em Copas do Mundo (1958, 1962, 1970), √∫nico jogador com esse feito',
                    'Mais de 1.000 gols marcados em carreira oficial',
                    'Populariza√ß√£o do futebol brasileiro e mundial atrav√©s de seu talento √∫nico'
                ],
                timeline: [
                    {year: '1940', event: 'Nascimento em Tr√™s Cora√ß√µes, Minas Gerais'},
                    {year: '1956', event: 'Estreia profissional pelo Santos aos 15 anos'},
                    {year: '1958', event: 'Primeira Copa do Mundo conquistada, aos 17 anos'},
                    {year: '1970', event: 'Terceira Copa do World conquistada no M√©xico'},
                    {year: '1977', event: 'Aposentadoria oficial do futebol'}
                ],
                curiosities: [
                    'O apelido "Pel√©" n√£o tem origem confirmada, ele mesmo n√£o sabia exatamente de onde veio',
                    'Foi declarado Patrim√¥nio Nacional do Brasil em 1961',
                    'Atuou como Ministro dos Esportes do Brasil de 1995 a 1998'
                ]
            },
            'Santos Dumont': {
                name: 'Alberto Santos Dumont',
                birth_date: '20/07/1873',
                birth_place: 'Palmira, Brasil',
                death_date: '23/07/1932',
                death_place: 'Guaruj√°, Brasil',
                nationality: 'Brasileira',
                main_areas: ['Avia√ß√£o', 'Inven√ß√£o', 'Engenharia'],
                biography: 'Alberto Santos Dumont foi um aeronauta, esportista e inventor brasileiro, considerado o pai da avia√ß√£o por muitos. Filho de um rico fazendeiro de caf√©, mudou-se para Paris jovem, onde se dedicou ao estudo da mec√¢nica e dos motores. Santos Dumont conquistou fama mundial com seus dirig√≠veis, especialmente quando contornou a Torre Eiffel com o dirig√≠vel n¬∫ 6 em 1901. Em 1906, realizou o primeiro voo p√∫blico de um avi√£o na Europa com o 14-Bis, sendo oficialmente reconhecido como o primeiro voo da hist√≥ria pela Federa√ß√£o Aeron√°utica Internacional. Diferentemente dos irm√£os Wright, Santos Dumont tornou suas inven√ß√µes p√∫blicas, n√£o patenteando seus projetos para que a avia√ß√£o se desenvolvesse livremente.',
                major_contributions: [
                    'Primeiro voo p√∫blico oficialmente reconhecido com o avi√£o 14-Bis',
                    'Desenvolvimento de dirig√≠veis que popularizaram o voo',
                    'Cria√ß√£o do Demoiselle, um dos primeiros avi√µes leves e acess√≠veis'
                ],
                timeline: [
                    {year: '1873', event: 'Nascimento em Palmira (atual Santos Dumont), Minas Gerais'},
                    {year: '1897', event: 'Muda-se para Paris e inicia experimentos com bal√µes'},
                    {year: '1901', event: 'Contorna a Torre Eiffel com o dirig√≠vel n¬∫ 6'},
                    {year: '1906', event: 'Primeiro voo do 14-Bis em Paris'},
                    {year: '1932', event: 'Falece no Guaruj√° aos 59 anos'}
                ],
                curiosities: [
                    'Usava sempre terno e gravata, mesmo durante os voos',
                    'Inventou o rel√≥gio de pulso masculino para consultar as horas durante o voo',
                    'Nunca patenteou suas inven√ß√µes, acreditando que a avia√ß√£o deveria ser livre para todos'
                ]
            }
        };

        // === FUN√á√ïES AUXILIARES ===
        function showStatus(message, type = 'info') {
            statusDiv.textContent = message;
            statusDiv.className = `status-${type}`;
            statusDiv.style.display = 'block';
            suggestionsContainer.style.display = 'none';
        }
        
        function fillExample(name) {
            personInput.value = name;
            personInput.focus();
            hideAutoComplete();
            hideSuggestions();
        }

        function hideSuggestions() {
            suggestionsContainer.style.display = 'none';
        }

        function hideAutoComplete() {
            autoCompleteSuggestions.style.display = 'none';
            currentSuggestionIndex = -1;
        }

        // === FUN√á√ïES DE SUGEST√ÉO ===
        function calculateDistance(str1, str2) {
            const matrix = [];
            const len1 = str1.length;
            const len2 = str2.length;

            for (let i = 0; i <= len2; i++) {
                matrix[i] = [i];
            }

            for (let j = 0; j <= len1; j++) {
                matrix[0][j] = j;
            }

            for (let i = 1; i <= len2; i++) {
                for (let j = 1; j <= len1; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }

            return matrix[len2][len1];
        }

        function findSimilarNames(input, maxSuggestions = 6) {
            const inputLower = input.toLowerCase().trim();
            if (inputLower.length < 2) return [];

            const suggestions = [];
            
            for (const person of famousPeople) {
                const personLower = person.toLowerCase();
                const distance = calculateDistance(inputLower, personLower);
                const maxLen = Math.max(inputLower.length, personLower.length);
                const similarity = 1 - (distance / maxLen);
                
                // Inclui se tem similaridade > 0.4 ou se cont√©m as palavras
                if (similarity > 0.4 || 
                    personLower.includes(inputLower) || 
                    inputLower.split(' ').every(word => personLower.includes(word))) {
                    suggestions.push({
                        name: person,
                        similarity: similarity,
                        distance: distance
                    });
                }
            }

            return suggestions
                .sort((a, b) => b.similarity - a.similarity)
                .slice(0, maxSuggestions)
                .map(s => s.name);
        }

        function showSuggestions(suggestions) {
            if (suggestions.length === 0) {
                suggestionsContainer.style.display = 'none';
                return;
            }

            suggestionsGrid.innerHTML = suggestions
                .map(name => `
                    <div class="suggestion-item" onclick="selectSuggestion('${name}')">
                        ${name}
                    </div>
                `).join('');

            suggestionsContainer.style.display = 'block';
        }

        function selectSuggestion(name) {
            personInput.value = name;
            hideSuggestions();
            hideAutoComplete();
            generateBiography();
        }

        function showAutoComplete(suggestions) {
            if (suggestions.length === 0) {
                hideAutoComplete();
                return;
            }

            autoCompleteSuggestions.innerHTML = suggestions
                .map((name, index) => `
                    <div class="auto-complete-item" onclick="selectSuggestion('${name}')" data-index="${index}">
                        ${name}
                    </div>
                `).join('');

            autoCompleteSuggestions.style.display = 'block';
        }

        // === FUN√á√ÉO PRINCIPAL ===
        async function generateBiography() {
            const personName = personInput.value.trim();
            if (!personName) {
                showStatus('Por favor, digite o nome de uma pessoa.', 'error');
                return;
            }

            generateBtn.disabled = true;
            generateBtn.textContent = 'Pesquisando...';
            showStatus('Coletando informa√ß√µes... Isso pode levar um momento.', 'info');
            biographyContainer.style.display = 'none';
            hideSuggestions();
            hideAutoComplete();

            try {
                // Verifica se o Puter est√° dispon√≠vel
                if (typeof puter === 'undefined' || !puter.ai) {
                    console.log('Puter n√£o dispon√≠vel, tentando biografia de fallback...');
                    const fallbackResult = tryFallbackBiography(personName);
                    if (fallbackResult) {
                        displayBiography(fallbackResult);
                        showStatus('Biografia carregada com sucesso!', 'success');
                        return;
                    }
                    throw new Error('Servi√ßo de IA n√£o est√° dispon√≠vel e n√£o h√° biografia de fallback.');
                }

                console.log('Iniciando gera√ß√£o de biografia para:', personName);

                const prompt = `Crie uma biografia detalhada para: ${personName}

Responda APENAS com um JSON v√°lido neste formato exato:
{
  "name": "Nome completo da pessoa",
  "birth_date": "DD/MM/AAAA ou Informa√ß√£o n√£o dispon√≠vel",
  "birth_place": "Cidade, Pa√≠s ou Informa√ß√£o n√£o dispon√≠vel",
  "death_date": "DD/MM/AAAA ou Ainda vivo(a) ou Informa√ß√£o n√£o dispon√≠vel",
  "death_place": "Local ou N/A ou Informa√ß√£o n√£o dispon√≠vel",
  "nationality": "Nacionalidade",
  "main_areas": ["√Årea principal", "√Årea secund√°ria"],
  "biography": "Biografia detalhada em 3 par√°grafos sobre vida, carreira e legado.",
  "major_contributions": ["Contribui√ß√£o 1", "Contribui√ß√£o 2", "Contribui√ß√£o 3"],
  "timeline": [
    {"year": "1900", "event": "Evento importante"},
    {"year": "1920", "event": "Outro evento"},
    {"year": "1940", "event": "Mais um evento"}
  ],
  "curiosities": ["Curiosidade 1", "Curiosidade 2"]
}

Se a pessoa n√£o existir ou for desconhecida, responda:
{"error": "PERSON_NOT_FOUND", "message": "Pessoa n√£o encontrada"}

Pessoa: ${personName}`;

                console.log('Enviando prompt para IA...');
                
                const response = await puter.ai.chat([{ 
                    role: 'user', 
                    content: prompt 
                }]);
                
                console.log('Resposta da IA recebida:', response);

                if (!response || !response.message || !response.message.content) {
                    throw new Error('Resposta da IA est√° vazia ou inv√°lida.');
                }

                let content = response.message.content.trim();
                console.log('Conte√∫do da resposta:', content);

                // Limpa o conte√∫do para encontrar apenas o JSON
                const jsonStart = content.indexOf('{');
                const jsonEnd = content.lastIndexOf('}') + 1;
                
                if (jsonStart === -1 || jsonEnd === 0) {
                    throw new Error('Nenhum JSON v√°lido encontrado na resposta.');
                }

                const jsonString = content.substring(jsonStart, jsonEnd);
                console.log('JSON extra√≠do:', jsonString);

                let biographyData;
                try {
                    biographyData = JSON.parse(jsonString);
                } catch (parseError) {
                    console.error('Erro ao fazer parse do JSON:', parseError);
                    // Tenta biografia de fallback em caso de erro de parse
                    const fallbackResult = tryFallbackBiography(personName);
                    if (fallbackResult) {
                        displayBiography(fallbackResult);
                        showStatus('Biografia carregada (dados locais)!', 'success');
                        return;
                    }
                    throw new Error('Formato JSON inv√°lido na resposta da IA.');
                }

                console.log('Dados da biografia parseados:', biographyData);

                // Verifica se √© um erro (pessoa n√£o encontrada)
                if (biographyData.error === 'PERSON_NOT_FOUND') {
                    console.log('Pessoa n√£o encontrada pela IA, tentando fallback...');
                    const fallbackResult = tryFallbackBiography(personName);
                    if (fallbackResult) {
                        displayBiography(fallbackResult);
                        showStatus('Biografia encontrada (dados locais)!', 'success');
                        return;
                    }
                    
                    showStatus('Pessoa n√£o encontrada. Veja as sugest√µes abaixo:', 'error');
                    const suggestions = findSimilarNames(personName, 8);
                    showSuggestions(suggestions);
                    return;
                }

                // Valida se tem os campos b√°sicos
                if (!biographyData.name) {
                    // Tenta fallback se dados incompletos
                    const fallbackResult = tryFallbackBiography(personName);
                    if (fallbackResult) {
                        displayBiography(fallbackResult);
                        showStatus('Biografia carregada (dados locais)!', 'success');
                        return;
                    }
                    throw new Error('Dados da biografia incompletos.');
                }

                displayBiography(biographyData);
                showStatus('Biografia gerada com sucesso!', 'success');jsonString);
                } catch (parseError) {
                    console.error('Erro ao fazer parse do JSON:', parseError);
                    throw new Error('Formato JSON inv√°lido na resposta da IA.');
                }

                console.log('Dados da biografia parseados:', biographyData);

                // Verifica se √© um erro (pessoa n√£o encontrada)
                if (biographyData.error === 'PERSON_NOT_FOUND') {
                    console.log('Pessoa n√£o encontrada, mostrando sugest√µes...');
                    showStatus('Pessoa n√£o encontrada. Veja as sugest√µes abaixo:', 'error');
                    const suggestions = findSimilarNames(personName, 8);
                    showSuggestions(suggestions);
                    return;
                }

                // Valida se tem os campos b√°sicos
                if (!biographyData.name) {
                    throw new Error('Dados da biografia incompletos.');
                }

                displayBiography(biographyData);
                showStatus('Biografia gerada com sucesso!', 'success');

            } catch (error) {
                console.error('Erro detalhado na gera√ß√£o:', error);
                
                // Tenta biografia de fallback antes de mostrar erro
                const fallbackResult = tryFallbackBiography(personName);
                if (fallbackResult) {
                    displayBiography(fallbackResult);
                    showStatus('Biografia carregada (modo offline)!', 'success');
                    return;
                }
                
                let errorMessage = 'Erro ao gerar biografia';
                
                if (error.message.includes('Puter')) {
                    errorMessage = 'Servi√ßo de IA n√£o dispon√≠vel';
                } else if (error.message.includes('JSON')) {
                    errorMessage = 'Erro no formato da resposta';
                } else if (error.message.includes('rede') || error.message.includes('network')) {
                    errorMessage = 'Erro de conex√£o';
                }
                
                showStatus(`${errorMessage}. Veja as sugest√µes abaixo:`, 'error');
                
                // Mostra sugest√µes em caso de erro
                const suggestions = findSimilarNames(personName, 8);
                if (suggestions.length > 0) {
                    showSuggestions(suggestions);
                } else {
                    // Se n√£o h√° sugest√µes, mostra algumas pessoas famosas aleat√≥rias
                    const randomSuggestions = famousPeople
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 6);
                    showSuggestions(randomSuggestions);
                }
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'üîç Gerar Biografia Completa';
            }
        }

        // === FUN√á√ÉO DE FALLBACK ===
        function tryFallbackBiography(personName) {
            const normalizedInput = personName.toLowerCase().trim();
            
            // Procura correspond√™ncia exata
            for (const [key, biography] of Object.entries(fallbackBiographies)) {
                if (key.toLowerCase() === normalizedInput) {
                    console.log('Biografia de fallback encontrada:', key);
                    return biography;
                }
            }
            
            // Procura correspond√™ncia parcial
            for (const [key, biography] of Object.entries(fallbackBiographies)) {
                const keyLower = key.toLowerCase();
                if (keyLower.includes(normalizedInput) || normalizedInput.includes(keyLower)) {
                    console.log('Biografia de fallback encontrada (correspond√™ncia parcial):', key);
                    return biography;
                }
            }
            
            return null;
        }jsonString);
                } catch (parseError) {
                    console.error('Erro ao fazer parse do JSON:', parseError);
                    throw new Error('Formato JSON inv√°lido na resposta da IA.');
                }

                console.log('Dados da biografia parseados:', biographyData);

                // Verifica se √© um erro (pessoa n√£o encontrada)
                if (biographyData.error === 'PERSON_NOT_FOUND') {
                    console.log('Pessoa n√£o encontrada, mostrando sugest√µes...');
                    showStatus('Pessoa n√£o encontrada. Veja as sugest√µes abaixo:', 'error');
                    const suggestions = findSimilarNames(personName, 8);
                    showSuggestions(suggestions);
                    return;
                }

                // Valida se tem os campos b√°sicos
                if (!biographyData.name) {
                    throw new Error('Dados da biografia incompletos.');
                }

                displayBiography(biographyData);
                showStatus('Biografia gerada com sucesso!', 'success');

            } catch (error) {
                console.error('Erro detalhado na gera√ß√£o:', error);
                
                let errorMessage = 'Erro ao gerar biografia';
                
                if (error.message.includes('Puter')) {
                    errorMessage = 'Servi√ßo de IA n√£o dispon√≠vel';
                } else if (error.message.includes('JSON')) {
                    errorMessage = 'Erro no formato da resposta';
                } else if (error.message.includes('rede') || error.message.includes('network')) {
                    errorMessage = 'Erro de conex√£o';
                }
                
                showStatus(`${errorMessage}. Veja as sugest√µes abaixo:`, 'error');
                
                // Mostra sugest√µes em caso de erro
                const suggestions = findSimilarNames(personName, 8);
                if (suggestions.length > 0) {
                    showSuggestions(suggestions);
                } else {
                    // Se n√£o h√° sugest√µes, mostra algumas pessoas famosas aleat√≥rias
                    const randomSuggestions = famousPeople
                        .sort(() => 0.5 - Math.random())
                        .slice(0, 6);
                    showSuggestions(randomSuggestions);
                }
            } finally {
                generateBtn.disabled = false;
                generateBtn.textContent = 'üîç Gerar Biografia Completa';
            }
        }

        // === FUN√á√ÉO DE EXIBI√á√ÉO ===
        function displayBiography(data) {
            const photoId = `photo-${Date.now()}`;
            const biographyHTML = `
                <div class="biography-card">
                    <button class="clear-button" onclick="clearBiography()">Limpar Biografia</button>
                    
                    <div class="mathematician-header">
                        <div class="mathematician-photo" id="${photoId}">
                            <div class="photo-placeholder">
                                <div class="loading-photo"></div>
                                <div>Procurando foto...</div>
                            </div>
                        </div>
                        
                        <div class="mathematician-info">
                            <h2 class="mathematician-name">${data.name || 'Nome n√£o encontrado'}</h2>
                            
                            <div class="basic-info">
                                <div class="info-item">
                                    <span class="info-label">üìÖ Nascimento:</span>
                                    <span class="info-value">${data.birth_date || 'N/A'} em ${data.birth_place || 'N/A'}</span>
                                </div>
                                ${data.death_date && !data.death_date.toLowerCase().includes('vivo') ? `
                                <div class="info-item">
                                    <span class="info-label">‚ö∞Ô∏è Falecimento:</span>
                                    <span class="info-value">${data.death_date || 'N/A'} em ${data.death_place || 'N/A'}</span>
                                </div>
                                ` : ''}
                                <div class="info-item">
                                    <span class="info-label">üåç Nacionalidade:</span>
                                    <span class="info-value">${data.nationality || 'N/A'}</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">üèÜ Atua√ß√£o:</span>
                                    <span class="info-value">${(data.main_areas || []).join(', ')}</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="biography-content">
                        ${data.biography ? `
                        <div class="biography-section">
                            <div class="section-title">üìñ Biografia</div>
                            <p>${data.biography.replace(/\n/g, '<br>')}</p>
                        </div>` : ''}

                        ${data.major_contributions && data.major_contributions.length > 0 ? `
                        <div class="biography-section">
                            <div class="section-title">üèÜ Principais Feitos</div>
                            <ul class="contributions-list">
                                ${data.major_contributions.map(contrib => `<li>${contrib}</li>`).join('')}
                            </ul>
                        </div>` : ''}

                        ${data.timeline && data.timeline.length > 0 ? `
                        <div class="biography-section">
                            <div class="section-title">üìÖ Linha do Tempo</div>
                            ${data.timeline.map(item => `
                                <div class="timeline-item">
                                    <div class="timeline-year">${item.year}</div>
                                    <div class="timeline-event">${item.event}</div>
                                </div>
                            `).join('')}
                        </div>` : ''}

                        ${data.curiosities && data.curiosities.length > 0 ? `
                        <div class="biography-section">
                            <div class="section-title">üîç Curiosidades</div>
                            <ul class="contributions-list">
                                ${data.curiosities.map(curiosity => `<li>${curiosity}</li>`).join('')}
                            </ul>
                        </div>` : ''}
                    </div>
                </div>
            `;

            biographyContainer.innerHTML = biographyHTML;
            biographyContainer.style.display = 'block';
            window.scrollTo({ top: biographyContainer.offsetTop - 20, behavior: 'smooth' });
            
            loadPersonPhoto(data.name, photoId);
        }

        // === FUN√á√ÉO MELHORADA PARA CARREGAR FOTOS ===
        async function loadPersonPhoto(personName, photoElementId) {
            const photoElement = document.getElementById(photoElementId);
            if (!photoElement) {
                console.error('Elemento da foto n√£o encontrado:', photoElementId);
                return;
            }

            console.log(`Tentando carregar foto para: ${personName}`);
            
            // Array de diferentes fontes de imagem para tentar
            const imageSources = [
                () => tryWikipediaAPI(personName),
                () => tryWikipediaDirectSearch(personName),
                () => tryWikimediaCommons(personName)
            ];

            let photoLoaded = false;
            let attemptCount = 0;

            for (const sourceFunction of imageSources) {
                if (photoLoaded) break;
                
                attemptCount++;
                updatePhotoStatus(photoElement, `Tentativa ${attemptCount}/3...`);
                
                try {
                    const imageUrl = await sourceFunction();
                    if (imageUrl) {
                        const success = await loadImageWithFallback(imageUrl, personName, photoElement);
                        if (success) {
                            photoLoaded = true;
                            console.log(`Foto carregada com sucesso na tentativa ${attemptCount}:`, imageUrl);
                        }
                    }
                } catch (error) {
                    console.warn(`Erro na tentativa ${attemptCount} para ${personName}:`, error.message);
                }
                
                // Pequena pausa entre tentativas
                if (!photoLoaded && attemptCount < imageSources.length) {
                    await new Promise(resolve => setTimeout(resolve, 500));
                }
            }

            if (!photoLoaded) {
                console.log(`Nenhuma foto encontrada para ${personName}, usando placeholder`);
                showCustomPlaceholder(personName, photoElementId, 'Foto n√£o encontrada');
            }
        }

        // === M√âTODOS DE BUSCA DE IMAGENS ===
        async function tryWikipediaAPI(personName) {
            console.log('Tentando Wikipedia API...');
            
            // Tenta m√∫ltiplas varia√ß√µes do nome
            const nameVariations = [
                personName,
                personName.replace(/\s+/g, '_'),
                personName.split(' ').join('_')
            ];

            for (const name of nameVariations) {
                try {
                    const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(name)}`;
                    console.log('URL da Wikipedia:', url);
                    
                    const response = await fetch(url, {
                        headers: {
                            'User-Agent': 'BiographyGenerator/1.0 (https://biography-generator.com)'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error(`Status ${response.status}: ${response.statusText}`);
                    }
                    
                    const data = await response.json();
                    console.log('Resposta da Wikipedia:', data);
                    
                    if (data.thumbnail && data.thumbnail.source) {
                        return data.thumbnail.source.replace(/\/\d+px-/, '/300px-'); // Aumenta resolu√ß√£o
                    }
                } catch (error) {
                    console.warn(`Erro com varia√ß√£o "${name}":`, error.message);
                }
            }
            
            return null;
        }

        async function tryWikipediaDirectSearch(personName) {
            console.log('Tentando busca direta Wikipedia...');
            
            try {
                const searchUrl = `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(personName)}&format=json&origin=*`;
                
                const searchResponse = await fetch(searchUrl);
                if (!searchResponse.ok) throw new Error('Falha na busca');
                
                const searchData = await searchResponse.json();
                
                if (searchData.query && searchData.query.search && searchData.query.search.length > 0) {
                    const firstResult = searchData.query.search[0];
                    return await tryWikipediaAPI(firstResult.title);
                }
            } catch (error) {
                console.warn('Erro na busca direta:', error.message);
            }
            
            return null;
        }

        async function tryWikimediaCommons(personName) {
            console.log('Tentando Wikimedia Commons...');
            
            try {
                const searchUrl = `https://commons.wikimedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(personName)}&srnamespace=6&format=json&origin=*`;
                
                const response = await fetch(searchUrl);
                if (!response.ok) throw new Error('Falha no Wikimedia Commons');
                
                const data = await response.json();
                
                if (data.query && data.query.search && data.query.search.length > 0) {
                    const fileName = data.query.search[0].title;
                    const imageUrl = `https://commons.wikimedia.org/wiki/Special:FilePath/${encodeURIComponent(fileName)}?width=300`;
                    return imageUrl;
                }
            } catch (error) {
                console.warn('Erro no Wikimedia Commons:', error.message);
            }
            
            return null;
        }

        // === FUN√á√ÉO PARA CARREGAR IMAGEM COM FALLBACK ===
        async function loadImageWithFallback(imageUrl, personName, photoElement) {
            return new Promise((resolve) => {
                const img = new Image();
                
                img.onload = () => {
                    console.log('Imagem carregada com sucesso:', imageUrl);
                    photoElement.innerHTML = `
                        <img src="${imageUrl}" 
                             alt="Foto de ${personName}" 
                             style="width: 100%; height: 100%; object-fit: cover; border-radius: 7px;"
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="photo-placeholder" style="display: none;">
                            <div style="font-size: 48px; font-weight: bold;">${getInitials(personName)}</div>
                            <div style="font-size: 12px; opacity: 0.8;">Erro ao carregar</div>
                        </div>
                    `;
                    resolve(true);
                };
                
                img.onerror = (error) => {
                    console.warn('Erro ao carregar imagem:', imageUrl, error);
                    resolve(false);
                };
                
                // Timeout de 10 segundos
                setTimeout(() => {
                    console.warn('Timeout ao carregar imagem:', imageUrl);
                    resolve(false);
                }, 10000);
                
                img.src = imageUrl;
            });
        }

        // === FUN√á√ïES AUXILIARES ===
        function updatePhotoStatus(photoElement, message) {
            photoElement.innerHTML = `
                <div class="photo-placeholder">
                    <div class="loading-photo"></div>
                    <div>${message}</div>
                </div>
            `;
        }

        function getInitials(name) {
            return name.split(' ')
                      .map(n => n[0])
                      .join('')
                      .substring(0, 2)
                      .toUpperCase();
        }

        function showCustomPlaceholder(name, elementId, message = 'Foto n√£o encontrada') {
            const photoElement = document.getElementById(elementId);
            if (!photoElement) return;

            const initials = getInitials(name);
            const colors = ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b', '#fa709a'];
            const color = colors[name.length % colors.length];

            photoElement.innerHTML = `
                <div class="photo-placeholder" style="background: ${color};">
                    <div style="font-size: 48px; font-weight: bold;">${initials}</div>
                    <div style="font-size: 12px; opacity: 0.8; margin-top: 5px;">${message}</div>
                    <button class="photo-retry-btn" onclick="retryPhotoLoad('${name}', '${elementId}')">
                        Tentar novamente
                    </button>
                </div>
            `;
        }

        function retryPhotoLoad(personName, photoElementId) {
            console.log('Tentando recarregar foto para:', personName);
            loadPersonPhoto(personName, photoElementId);
        }

        function clearBiography() {
            biographyContainer.style.display = 'none';
            biographyContainer.innerHTML = '';
            personInput.value = '';
            statusDiv.style.display = 'none';
            hideSuggestions();
            hideAutoComplete();
            personInput.focus();
        }
        
        // === INICIALIZA√á√ÉO E EVENTOS ===
        generateBtn.addEventListener('click', generateBiography);
        
        personInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                if (currentSuggestionIndex >= 0) {
                    const suggestions = Array.from(autoCompleteSuggestions.children);
                    if (suggestions[currentSuggestionIndex]) {
                        const name = suggestions[currentSuggestionIndex].textContent;
                        selectSuggestion(name);
                        return;
                    }
                }
                generateBiography();
            }
        });

        // Auto-complete enquanto digita
        personInput.addEventListener('input', function(e) {
            const input = e.target.value.trim();
            
            if (autoCompleteTimeout) {
                clearTimeout(autoCompleteTimeout);
            }
            
            if (input.length < 2) {
                hideAutoComplete();
                return;
            }
            
            autoCompleteTimeout = setTimeout(() => {
                const suggestions = findSimilarNames(input, 5);
                showAutoComplete(suggestions);
            }, 300);
        });

        // Navega√ß√£o com teclado no auto-complete
        personInput.addEventListener('keydown', function(e) {
            const suggestions = Array.from(autoCompleteSuggestions.children);
            
            if (suggestions.length === 0) return;
            
            if (e.key === 'ArrowDown') {
                e.preventDefault();
                currentSuggestionIndex = Math.min(currentSuggestionIndex + 1, suggestions.length - 1);
                updateSuggestionSelection(suggestions);
            } else if (e.key === 'ArrowUp') {
                e.preventDefault();
                currentSuggestionIndex = Math.max(currentSuggestionIndex - 1, -1);
                updateSuggestionSelection(suggestions);
            } else if (e.key === 'Escape') {
                hideAutoComplete();
            }
        });

        function updateSuggestionSelection(suggestions) {
            suggestions.forEach((item, index) => {
                item.classList.toggle('selected', index === currentSuggestionIndex);
            });
        }

        // Clica fora para fechar
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.auto-complete-container')) {
                hideAutoComplete();
            }
            if (!e.target.closest('.suggestions-container') && !e.target.closest('.search-section')) {
                hideSuggestions();
            }
        });

        // Torna as fun√ß√µes dispon√≠veis globalmente
        window.fillExample = fillExample;
        window.clearBiography = clearBiography;
        window.retryPhotoLoad = retryPhotoLoad;
        window.selectSuggestion = selectSuggestion;

        personInput.focus();
    </script>
</body>
</html>
